# Dev Container Feature: jemalloc

A feature for a dev container that installs the jemalloc allocator library.
It's meant as an addition to the swift 5.7 (and later) images to install supporting
C libraries.

    apt-get update && apt-get install -y curl git make unzip \
    sqlite3 libsqlite3-dev  `# dependencies for building SPM` \
    libcurl4-openssl-dev    `# Foundation networking`


Example using the feature:

```jsonc
{
    "image": "swift:5.7",
    "features": {
        "ghcr.io/heckj/devcontainer-swift-additions/jemalloc:1": { },
        "ghcr.io/heckj/devcontainer-swift-additions/swiftpm:1": { },
        "ghcr.io/heckj/devcontainer-swift-additions/foundationnetworking:1": { }
    }
}
```

## Testing

using the devcontainer CLI:

```
devcontainer features test --skip-autogenerated -f jemalloc -i ubuntu:latest .
devcontainer features test --skip-scenarios -f jemalloc -i ubuntu:latest .

devcontainer features test --skip-autogenerated -f swiftpm -i ubuntu:latest .
devcontainer features test --skip-scenarios -f swiftpm -i ubuntu:latest .

devcontainer features test --skip-autogenerated -f foundationnetworking -i ubuntu:latest .
devcontainer features test --skip-scenarios -f foundationnetworking -i ubuntu:latest .

devcontainer features test --global-scenarios-only -i ubuntu:latest .
```

